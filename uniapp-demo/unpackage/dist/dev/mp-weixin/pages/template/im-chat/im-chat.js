require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([3],{628:function(e,t,s){"use strict";var n=i(s(1)),o=i(s(629));function i(e){return e&&e.__esModule?e:{default:e}}new n.default(o.default).$mount()},629:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(631),o=s.n(n),i=s(640),a=!1;var u=function(e){a||s(630)},c=s(0)(o.a,i.a,u,null,null);c.options.__file="Users/gyl-dev/working/xiangliang/uniapp-demo/uniapp-demo/pages/template/im-chat/im-chat.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] im-chat.vue: functional components are not supported with templates, they should use render functions."),t.default=c.exports},630:function(e,t){},631:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=i(s(632)),o=i(s(636));function i(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{name:"xcecd@qq.com",style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},scrollTop:0,messages:[{user:"home",type:"head",content:"你好!"}]}},components:{chatInput:n.default,messageShow:o.default},onLoad:function(){var t=e.getSystemInfoSync();this.style.pageHeight=t.windowHeight,this.style.contentViewHeight=t.windowHeight-e.getSystemInfoSync().screenWidth/750*100},methods:{getInputMessage:function(e){this.addMessage("customer",e.content,!1),this.toRobot(e.content)},addMessage:function(e,t,s,n){this.messages.push({user:e,content:t,hasSub:s,subcontent:n})},scrollToBottom:function(){var t=this,s=e.createSelectorQuery();s.selectAll(".m-item").boundingClientRect(),s.select("#scrollview").boundingClientRect(),s.exec(function(e){t.style.mitemHeight=0,e[0].forEach(function(e){t.style.mitemHeight=t.style.mitemHeight+e.height+20}),t.style.mitemHeight>t.style.contentViewHeight&&(t.scrollTop=t.style.mitemHeight-t.style.contentViewHeight)})},toRobot:function(t){var s=this;e.request({url:"http://www.tuling123.com/openapi/api",data:{key:"acfbca724ea1b5db96d2eef88ce677dc",info:t,userid:"uni-test"},success:function(e){console.log("s",e),s.addMessage("home",e.data.text,!1),s.scrollToBottom(),console.log("request success:"+e.data.text)},fail:function(t){console.log("request fail",t),e.showModal({content:t.errMsg,showCancel:!1})}})}}}}).call(t,s(2).default)},632:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(634),o=s.n(n),i=s(635),a=!1;var u=function(e){a||s(633)},c=s(0)(o.a,i.a,u,null,null);c.options.__file="Users/gyl-dev/working/xiangliang/uniapp-demo/uniapp-demo/components/im-chat/chatinput.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] chatinput.vue: functional components are not supported with templates, they should use render functions."),t.default=c.exports},633:function(e,t){},634:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"chat-input",data:function(){return{inputValue:""}},methods:{startRecognize:function(){var e={},t=this;e.engine="iFly",t.inputValue="",plus.speech.startRecognize(e,function(e){console.log(e),t.inputValue+=e},function(e){console.log("语音识别失败："+e.message)})},sendMessge:function(){""==this.inputValue.trim()?this.inputValue="":(this.$emit("send-message",{type:"text",content:this.inputValue}),this.inputValue="")}}}},635:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"footer"},[s("view",{staticClass:"footer-left"},[s("view",{staticClass:"uni-icon uni-icon-mic",attrs:{eventid:"BKt-0"},on:{tap:e.startRecognize}})]),e._v(" "),s("view",{staticClass:"footer-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"input-text",attrs:{type:"text",eventid:"tRg-1"},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})]),e._v(" "),s("view",{staticClass:"footer-right",attrs:{eventid:"DD0-2"},on:{tap:e.sendMessge}},[s("view",{attrs:{id:"msg-type"}},[e._v("发送")])])])};n._withStripped=!0;var o={render:n,staticRenderFns:[]};t.a=o},636:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(638),o=s.n(n),i=s(639),a=!1;var u=function(e){a||s(637)},c=s(0)(o.a,i.a,u,null,null);c.options.__file="Users/gyl-dev/working/xiangliang/uniapp-demo/uniapp-demo/components/im-chat/messageshow.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] messageshow.vue: functional components are not supported with templates, they should use render functions."),t.default=c.exports},637:function(e,t){},638:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["message","id"]}},639:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"m-item",attrs:{id:"message"+e.id}},[s("view",{staticClass:"m-left"},["home"==e.message.user?s("image",{staticClass:"head_icon",attrs:{src:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/homeHL.png"}}):e._e()]),e._v(" "),s("view",{staticClass:"m-content"},[s("view",{staticClass:"m-content-head",class:{"m-content-head-right":"customer"==e.message.user}},[s("view",{class:"m-content-head-"+e.message.user},[e._v(e._s(e.message.content)+" ")])])]),e._v(" "),s("view",{staticClass:"m-right"},["customer"==e.message.user?s("image",{staticClass:"head_icon",attrs:{src:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/customerHL.png"}}):e._e()])])};n._withStripped=!0;var o={render:n,staticRenderFns:[]};t.a=o},640:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"uni-column"},[s("view",{staticClass:"content",style:{height:e.style.contentViewHeight+"px"},attrs:{id:"content"}},[s("scroll-view",{style:{height:e.style.contentViewHeight+"px"},attrs:{id:"scrollview","scroll-y":"true","scroll-with-animation":!0,"scroll-top":e.scrollTop}},[s("page-foot",{attrs:{name:e.name,mpcomid:"lIW-0"}}),e._v(" "),e._l(e.messages,function(e,t){return s("message-show",{key:t,attrs:{message:e,id:t,mpcomid:"zes-1-"+t}})}),e._v(" "),s("view",{attrs:{id:"bottom"}})],2)],1),e._v(" "),s("view",{staticClass:"foot"},[s("chat-input",{attrs:{eventid:"2Fn-0",mpcomid:"9Bf-2"},on:{"send-message":e.getInputMessage,focus:e.inputGetFocus}})],1)])};n._withStripped=!0;var o={render:n,staticRenderFns:[]};t.a=o}},[628]);
//# sourceMappingURL=../../../.sourcemap/pages/template/im-chat/im-chat.js.map